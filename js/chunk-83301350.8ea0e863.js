(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83301350"],{"0a85":function(t,e,s){"use strict";s("2a09")},"2a09":function(t,e,s){},a732:function(t,e,s){"use strict";var o=s("23e7"),a=s("2266"),i=s("59ed"),r=s("825a"),l=s("46c4");o({target:"Iterator",proto:!0,real:!0},{some:function(t){r(this),i(t);var e=l(this),s=0;return a(e,(function(e,o){if(t(e,s++))return o()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},ada2:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[t.get_openDialogForm?e("Form"):t._e(),e("import-excel"),e("div",{staticClass:"mt-4"},[e("vs-button",{attrs:{primary:""},on:{click:t.openDialog}},[t._v("Registrar Colegio")])],1),e("list",{attrs:{"list-schools":t.schools}})],1)},a=[],i=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("div",{staticClass:"flex justify-between items-center"},[e("div",{ref:"div",staticClass:"w-80 text-center p-5 border-2 border-dashed border-gray-200"},[e("label",{staticClass:"font-medium cursor-pointer"},[e("span",[t._v(t._s(t.label))]),e("input",{ref:"input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:t.onFileChange}}),e("div",{staticClass:"cursor-pointer flex justify-center"},[e("svg",{staticClass:"w-10 text-center flex",staticStyle:{"enable-background":"new 0 0 486.3 486.3"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 486.3 486.3","xml:space":"preserve"}},[e("g",[e("g",[e("path",{attrs:{d:"M395.5,135.8c-5.2-30.9-20.5-59.1-43.9-80.5c-26-23.8-59.8-36.9-95-36.9c-27.2,0-53.7,7.8-76.4,22.5\n\t\t\tc-18.9,12.2-34.6,28.7-45.7,48.1c-4.8-0.9-9.8-1.4-14.8-1.4c-42.5,0-77.1,34.6-77.1,77.1c0,5.5,0.6,10.8,1.6,16\n\t\t\tC16.7,200.7,0,232.9,0,267.2c0,27.7,10.3,54.6,29.1,75.9c19.3,21.8,44.8,34.7,72,36.2c0.3,0,0.5,0,0.8,0h86\n\t\t\tc7.5,0,13.5-6,13.5-13.5s-6-13.5-13.5-13.5h-85.6C61.4,349.8,27,310.9,27,267.1c0-28.3,15.2-54.7,39.7-69\n\t\t\tc5.7-3.3,8.1-10.2,5.9-16.4c-2-5.4-3-11.1-3-17.2c0-27.6,22.5-50.1,50.1-50.1c5.9,0,11.7,1,17.1,3c6.6,2.4,13.9-0.6,16.9-6.9\n\t\t\tc18.7-39.7,59.1-65.3,103-65.3c59,0,107.7,44.2,113.3,102.8c0.6,6.1,5.2,11,11.2,12c44.5,7.6,78.1,48.7,78.1,95.6\n\t\t\tc0,49.7-39.1,92.9-87.3,96.6h-73.7c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5h74.2c0.3,0,0.6,0,1,0c30.5-2.2,59-16.2,80.2-39.6\n\t\t\tc21.1-23.2,32.6-53,32.6-84C486.2,199.5,447.9,149.6,395.5,135.8z"}}),e("path",{attrs:{d:"M324.2,280c5.3-5.3,5.3-13.8,0-19.1l-71.5-71.5c-2.5-2.5-6-4-9.5-4s-7,1.4-9.5,4l-71.5,71.5c-5.3,5.3-5.3,13.8,0,19.1\n\t\t\tc2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4l48.5-48.5v222.9c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5V231.5l48.5,48.5\n\t\t\tC310.4,285.3,318.9,285.3,324.2,280z"}})])]),e("g"),e("g"),e("g"),e("g"),e("g"),e("g"),e("g"),e("g"),e("g"),e("g"),e("g"),e("g"),e("g"),e("g"),e("g")])]),e("span",{staticClass:"text-xs"},[t._v(t._s(t.name))])])]),e("span",{staticClass:"font-medium text-blue-300 text-2xl"},[t._v(t._s(t.name))])]),e("vs-dialog",{attrs:{width:"400px","prevent-close":"",blur:""},on:{close:t.Cancel},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",[t._v(" Importación del archivo "),e("b",[t._v("Excel")])])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"flex justify-end items-center"},[e("vs-button",{attrs:{dark:"",transparent:""},on:{click:t.Cancel}},[t._v(" Cancelar ")]),e("vs-button",{on:{click:t.saveSchools}},[t._v(" Guardar ")])],1)]},proxy:!0}]),model:{value:t.isSave,callback:function(e){t.isSave=e},expression:"isSave"}},[e("div",{staticClass:"con-content"},[e("p",[t._v(" ¿Está seguro de que desea importar el archivo Excel llamado "),e("b",[t._v(t._s(t.name))]),t._v("? ")])])])],1)},r=[function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"text-xl font-medium cursor-pointer"},[t._v("Importar Colegios")]),e("span",{staticClass:"text-sm"},[t._v("Tenga en cuenta que el encabezado del archivo Excel a importar debe tener las columnas "),e("b",[t._v("name")]),t._v(" y "),e("b",[t._v("district")]),t._v(".")])])}],l=s("8134"),c={name:"ImportExcel",props:{label:{type:String,default:"Arrastre o elija un Documento Excel aqui."}},data(){return{name:null,file:null,dragAndDropCapable:!0,dataExcel:[],isSave:!1}},mounted(){const{div:t}=this.$refs;this.dragAndDropCapable=this.isDragAndDropCapable(),this.dragAndDropCapable&&(["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(t=>{document.body.addEventListener(t,t=>{t.preventDefault(),t.stopPropagation()})}),t.addEventListener("drop",t=>{this.onFileChange(t)}))},methods:{removeFile(){this.$refs.input.value=null,this.name=null,this.file=null,this.dataExcel=[]},isExtensionValid(t){const e=t.split("."),s=e[e.length-1].trim();return"xlsx"===s||"xls"===s||(this.$vs.notification({title:"Archivo No Compatible",text:"Por favor, seleccione un archivo de Excel para cargar. 📛 ",color:"danger"}),!1)},isDragAndDropCapable(){const{div:t}=this.$refs;return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&"FormData"in window&&"FileReader"in window},onFileChange(t){const e=t.target.files||t.dataTransfer.files;e.length&&(this.name=e[0].name,this.isExtensionValid(e[0].name)&&(this.isSave=!0,this.file=e[0]))},async saveSchools(){this.isSave=!1;const t=this.$vs.loading({color:"success"});await Object(l["a"])(this.file).then(t=>{this.dataExcel=t});const e=await this.$store.dispatch("uploadSchools/uploadSchools",this.dataExcel);this.$vs.notification({title:e.error?"Error de importación ":"Importación Exitosa",text:e.error?e.error:e.message+". 🎉",color:e.error?"danger":"success"}),e.message&&await this.getListSchools(),this.removeFile(),t.close()},async getListSchools(){await this.$store.dispatch("uploadSchools/getListSchools")},Cancel(){this.isSave=!1,this.removeFile()}}},n=c,h=(s("0a85"),s("2877")),d=Object(h["a"])(n,i,r,!1,null,"16c8ba6a",null),u=d.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-5"},[e("vs-table",{staticClass:"cursor-pointer",attrs:{striped:""},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"text-msj"},[t._v("(Ejemplo de búsqueda: NUESTRA SEÑORA DE FATIMA-"),e("b",[t._v("IQUITOS")]),t._v("). Usa solo un guion para separar el nombre y el distrito, para mejorar la búsqueda.")]),e("vs-input",{attrs:{block:"",primary:"",state:"primary",type:"search",placeholder:"Buscar colegio"},on:{input:t.searchSchools},model:{value:t.textSearch,callback:function(e){t.textSearch=e},expression:"textSearch"}})]},proxy:!0},{key:"thead",fn:function(){return[e("vs-tr",[e("vs-th",[t._v(" Colegio ")]),e("vs-th",[t._v(" Distrito ")]),e("vs-th")],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.ListSchools,(function(s,o){return e("vs-tr",{key:o,attrs:{data:s}},[e("vs-td",[t._v(" "+t._s(s.name)+" ")]),e("vs-td",[t._v(" "+t._s(s.district)+" ")]),e("vs-td",{staticClass:"flex items-center justify-center"},[e("vs-button",{attrs:{icon:"",color:"primary"},on:{click:function(e){return t.editSchool(s)}}},[e("i",{staticClass:"fas fa-pen"})]),e("vs-button",{attrs:{icon:"",color:"danger"},on:{click:function(e){return t.deleteSchool(s)}}},[e("i",{staticClass:"fas fa-trash"})])],1)],1)}))},proxy:!0},{key:"notFound",fn:function(){return[t._v(" No se encontraron datos. 😢 ")]},proxy:!0}])}),t.get_openDialogDelete?e("Delete"):t._e()],1)},m=[],v=function(){var t=this,e=t._self._c;return e("div",[e("vs-dialog",{attrs:{blur:"","prevent-close":"",width:"400px"},on:{close:t.closeDelete},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",{staticClass:"vs-dialog__header__title"},[t._v("Eliminar "),e("b",[t._v("Colegio")])])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"flex justify-end"},[e("vs-button",{attrs:{disabled:t.isLoading,shadow:""},on:{click:t.closeDelete}},[t._v("Cancelar")]),e("vs-button",{attrs:{loading:t.isLoading},on:{click:t.deleteData}},[t._v("Confirmar")])],1)]},proxy:!0}]),model:{value:t.isActive,callback:function(e){t.isActive=e},expression:"isActive"}},[e("main",[e("div",{staticClass:"flex flex-col justify-center space-y-2"},[e("p",{staticClass:"text-red-500"},[t._v("¿Estás seguro que deseas eliminar este colegio?")]),e("b",[t._v(t._s(t.get_selectSchool.name))]),e("p",[t._v("Esta acción no se puede deshacer una vez confirmada.")])])])])],1)},g=[],f={name:"delete",data(){return{isActive:!0,isLoading:!1}},computed:{get_selectSchool(){return this.$store.getters["uploadSchools/get_selectSchool"]}},methods:{closeDelete(){this.$store.commit("uploadSchools/set_selectSchool",null),this.$store.commit("uploadSchools/set_openDialogDelete",!1)},async deleteData(){if(!this.get_selectSchool)return;this.isLoading=!0;const t=await this.$store.dispatch("uploadSchools/deleteSchool",this.get_selectSchool.id);t&&await this.$store.dispatch("uploadSchools/getListSchools"),this.$vs.notification({title:t?"Éxito 😃":"Error 😓",text:t?"El colegio ha sido eliminado correctamente. 👍":"Ocurrió un error al eliminar el colegio. 😓",color:t?"success":"danger"}),this.isLoading=!1,t&&this.closeDelete()}}},_=f,S=Object(h["a"])(_,v,g,!1,null,"1a2da250",null),x=S.exports,b={name:"List",components:{Delete:x},props:{ListSchools:{type:Array,default:()=>[]}},data(){return{textSearch:""}},computed:{get_openDialogDelete(){return this.$store.getters["uploadSchools/get_openDialogDelete"]}},methods:{async getSchools(){return await this.$store.dispatch("uploadSchools/getListSchools")},async searchSchools(){await this.$store.commit("uploadSchools/set_textSearch",this.textSearch),clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.getSchools()},300)},editSchool(t){this.$store.commit("uploadSchools/set_selectSchool",t),this.$store.commit("uploadSchools/set_openDialogForm",!0)},async deleteSchool(t){this.$store.commit("uploadSchools/set_selectSchool",t),this.$store.commit("uploadSchools/set_openDialogDelete",!0)}}},y=b,C=(s("f75e"),Object(h["a"])(y,p,m,!1,null,"a92a288e",null)),D=C.exports,k=function(){var t=this,e=t._self._c;return e("div",[e("vs-dialog",{attrs:{"prevent-close":"",blur:""},on:{close:t.closeForm},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",{staticClass:"not-margin"},[t._v(" "+t._s(t.get_selectSchool?"Actualizar":"Registrar")+" "),e("b",[t._v("Colegio")])])]},proxy:!0},{key:"footer",fn:function(){return[e("vs-button",{attrs:{block:"",loading:t.isLoading,primary:""},on:{click:t.saveData}},[t._v("Guardar")])]},proxy:!0}]),model:{value:t.activeForm,callback:function(e){t.activeForm=e},expression:"activeForm"}},[e("div",[e("form",{staticClass:"space-y-7"},[e("vs-input",{attrs:{block:"",primary:"",type:"text",label:"Nombre del colegio"},model:{value:t.nameSchool,callback:function(e){t.nameSchool=e},expression:"nameSchool"}}),e("vs-input",{attrs:{block:"",primary:"",type:"text",label:"Distrito"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveData.apply(null,arguments)}},model:{value:t.district,callback:function(e){t.district=e},expression:"district"}})],1)])])],1)},w=[],$=(s("e9f5"),s("a732"),{name:"Form",data(){return{nameSchool:"",district:"",activeForm:!0,isLoading:!1}},computed:{get_selectSchool(){return this.$store.getters["uploadSchools/get_selectSchool"]}},methods:{checksSpecialCharacters(){let t=[".",",","+","-","*","/","@","#","$","%","&","(",")","[","]","{","}","?","¿","!","¡",'"',"'","´","`","¨","^","~",";",":","<",">","|","°","¬","\\","/","º","ª","€","¥","¢","£","§","©","®","™","℅","ℓ","Ω","℮","℗","№","℞","℟"];return this.district.split("").some(e=>t.includes(e))},verifyForm(){return""!==this.nameSchool.trim()&&""!==this.district.trim()},closeForm(){this.get_selectSchool&&this.$store.commit("uploadSchools/set_selectSchool",null),this.$store.commit("uploadSchools/set_openDialogForm",!1)},initialData(){this.get_selectSchool&&(this.nameSchool=this.get_selectSchool.name,this.district=this.get_selectSchool.district)},async saveData(){if(!this.verifyForm())return void this.$vs.notification({title:"Error 😓",text:"Por favor, complete los campos. 👍",color:"danger"});if(this.checksSpecialCharacters())return void this.$vs.notification({title:"Error 😓",text:"No se permiten caracteres especiales en el campo distrito.",color:"danger"});this.isLoading=!0;let t={name:this.nameSchool.trim().toUpperCase(),district:this.district.trim().toUpperCase()};this.get_selectSchool&&(t={...t,id:this.get_selectSchool.id});const e=this.get_selectSchool?await this.$store.dispatch("uploadSchools/updateSchool",t):await this.$store.dispatch("uploadSchools/createSchool",t);e.message&&await this.$store.dispatch("uploadSchools/getListSchools"),this.$vs.notification({title:e.message?"Éxito 😃":"Alerta ⚠️",text:e.message?e.message+" 👍":""+e.error,color:e.message?"success":"danger"}),this.isLoading=!1,e.message&&this.closeForm()}},mounted(){this.initialData()}}),E=$,F=Object(h["a"])(E,k,w,!1,null,"7302f2a5",null),L=F.exports,A={components:{List:D,ImportExcel:u,Form:L},data(){return{isForm:!1}},computed:{schools(){return this.$store.getters["uploadSchools/get_school"]},get_openDialogForm(){return this.$store.getters["uploadSchools/get_openDialogForm"]}},methods:{async getListSchools(){await this.$store.dispatch("uploadSchools/getListSchools")},openDialog(){this.$store.commit("uploadSchools/set_openDialogForm",!0)}},mounted(){this.getListSchools()}},j=A,I=Object(h["a"])(j,o,a,!1,null,null,null);e["default"]=I.exports},f75e:function(t,e,s){"use strict";s("fa6b")},fa6b:function(t,e,s){}}]);
//# sourceMappingURL=chunk-83301350.8ea0e863.js.map