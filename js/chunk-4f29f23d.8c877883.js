(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f29f23d"],{2407:function(t,e,i){},e2af:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-full space-y-2"},[t._m(0),e("vs-row",{attrs:{justify:"space-between"}},[e("vs-button",{staticClass:"focus:outline-none",on:{click:()=>t.isRegister=!0}},[t._v("Resgistrar")])],1),t.isRegister?e("Form",{attrs:{item_incident:t.incident},on:{closeRegistration:function(e){t.isRegister=!1}}}):t._e(),e("list-incidents"),e("pre",[t._v(t._s(t.get_selected_incident))])],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"rounded-2xl font-semibold text-2xl bg-gray-100 p-4"},[e("span",[t._v("Registro de Incidentes")])])}],a=function(){var t=this,e=t._self._c;return e("div",[e("vs-dialog",{attrs:{blur:"","prevent-close":"",title:"Registro de Incidentes",width:"400px"},on:{close:t.Close},scopedSlots:t._u([{key:"header",fn:function(){return[t.id?e("div",{staticClass:"w-full mb-4"},[e("vs-button-group",[e("vs-button",{attrs:{transparent:"",block:"",active:0===t.activeButton},on:{click:function(e){t.activeButton=0}}},[t._v(" Editar Incidente ")]),e("vs-button",{attrs:{transparent:"",block:"",active:1===t.activeButton},on:{click:function(e){t.activeButton=1}}},[t._v(" Eliminar Incidente ")])],1)],1):e("h4",{staticClass:"not-margin"},[t._v(" "+t._s("Registrar")+" "),e("b",[t._v("Incidente")])])]},proxy:!0}]),model:{value:t.isActive,callback:function(e){t.isActive=e},expression:"isActive"}},[0===t.activeButton?e("div",{staticClass:"space-y-6"},[e("vs-input",{staticClass:"block",attrs:{primary:"",type:"number",label:"DNI postulante"},scopedSlots:t._u([t.is_dni?null:{key:"message-success",fn:function(){return[t._v(" DNI inválido (el DNI debe tener 8 dígitos) ")]},proxy:!0}],null,!0),model:{value:t.dni_applicant,callback:function(e){t.dni_applicant=e},expression:"dni_applicant"}}),e("div",{staticClass:"focus-within:text-indigo-500 transition-colors duration-300 ease-in-out"},[e("p",{staticClass:"textObservation"},[t._v("Observaciones")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.observation,expression:"observation"}],staticClass:"custom-scrollbar bg-gray-100 w-full max-w-lg h-36 p-2 rounded-md text-gray-700 resize-none overflow-y-scroll focus:outline-none focus:ring-0 border-b-2 focus:border-indigo-500",domProps:{value:t.observation},on:{input:function(e){e.target.composing||(t.observation=e.target.value)}}})]),e("vs-button",{attrs:{block:"",loading:t.isLoading},on:{click:t.save_incident}},[t._v(" "+t._s(t.id?"Actualizar":"Guardar")+" ")])],1):e("div",{staticClass:"-mt-4 space-y-4"},[e("span",{staticClass:"text-red-500"},[t._v(" ¿Estás seguro de que deseas eliminar esta incidencia? ")]),t._v(" "),e("br"),e("span",[e("b",[t._v("Nota:")]),t._v(" Esta acción no se puede deshacer una vez realizada. ")]),e("vs-button",{attrs:{danger:"",block:""},on:{click:t.confirmDeletion}},[t._v("Eliminar")])],1)]),t.confirm_deletion?e("vs-dialog",{scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",{staticClass:"not-margin"},[t._v(" Eliminar "),e("b",[t._v("incidente")])])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"flex justify-end"},[e("vs-button",{attrs:{transparent:""},on:{click:function(e){t.confirm_deletion=!1}}},[t._v("Cancelar")]),e("vs-button",{attrs:{loading:t.isLoading},on:{click:t.deleteIncident}},[t._v("Aceptar")])],1)]},proxy:!0}],null,!1,3702364553),model:{value:t.confirm_deletion,callback:function(e){t.confirm_deletion=e},expression:"confirm_deletion"}},[e("div",[t._v("¿Confirma la eliminación del incidente?")])]):t._e()],1)},o=[],c={props:{item_incident:{type:Object,default:null}},data(){return{isActive:!0,isLoading:!1,is_dni:!0,id:null,dni_applicant:"",observation:"",activeButton:null,confirm_deletion:!1}},computed:{},mounted(){this.activeButton=0,this.item_incident&&this.editableData()},methods:{editableData(){this.item_incident&&(this.id=this.item_incident.id,this.dni_applicant=this.item_incident.dni_applicant,this.observation=this.item_incident.observation)},Close(){this.$store.commit("incidente/set_selected_incident",null),this.$emit("closeRegistration",!1)},validate_dni_applicant(){const t=/^[0-9]{8}$/;return t.test(this.dni_applicant)},validate_data(){return this.dni_applicant||this.observation?this.dni_applicant?(this.is_dni=this.validate_dni_applicant(),this.validate_dni_applicant()?!!this.observation||(this.$vs.notification({title:"Registro de Incidentes",text:"Ingrese la observación del incidente 👍",color:"danger"}),!1):(this.$vs.notification({title:"Registro de Incidentes",text:"Ingrese un DNI válido 👍",color:"danger"}),!1)):(this.$vs.notification({title:"Registro de Incidentes",text:"Ingrese el DNI del postulante 👍",color:"danger"}),!1):(this.$vs.notification({title:"Registro de Incidentes",text:"Ingresar  datos del incidente 👍",color:"danger"}),!1)},async save_incident(){if(!this.validate_data())return;this.isLoading=!0;const t={dni_applicant:this.dni_applicant,observation:this.observation};this.id&&(t.id=this.id);const e=this.id?await this.$store.dispatch("incidente/update_incident",t):await this.$store.dispatch("incidente/create_incident",t);this.$vs.notification({title:"Registro de Incidentes",text:e.error?e.error:"Incidente registrado correctamente. 😊",color:e.error?"danger":"success"}),e.error||(await this.$store.dispatch("incidente/get_incident_list"),this.Close()),this.isLoading=!1},async deleteIncident(){if(!this.id)return;this.isLoading=!0;const t=await this.$store.dispatch("incidente/delete_incident",this.id);t?(this.$vs.notification({title:"Eliminación de Incidentes",text:"Incidente eliminado correctamente. 😊",color:"success"}),await this.$store.dispatch("incidente/get_incident_list")):this.$vs.notification({title:"Eliminación de Incidentes",text:"Error al eliminar el incidente. 😢",color:"danger"}),this.confirm_deletion=!1,this.Close(),this.isLoading=!1},confirmDeletion(){this.confirm_deletion=!0}}},r=c,d=(i("f191"),i("2877")),l=Object(d["a"])(r,a,o,!1,null,"60666a08",null),u=l.exports,v=function(){var t=this,e=t._self._c;return e("div",[e("vs-table",{attrs:{striped:""},scopedSlots:t._u([{key:"header",fn:function(){return[e("search-dni")]},proxy:!0},{key:"thead",fn:function(){return[e("vs-tr",[e("vs-th",{staticStyle:{width:"100px"}},[t._v("N° DNI")]),e("vs-th",[t._v("Observación")]),e("vs-th",[t._v("Fecha")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.get_incidents,(function(i,n){return e("vs-tr",{key:n,attrs:{data:i},on:{click:function(e){return t.editIncident(i)}}},[e("vs-td",{attrs:{edit:""}},[t._v(t._s(i.dni_applicant))]),e("vs-td",[t._v(t._s(i.observation))]),e("vs-td",[t._v(t._s(t.formatDate(i.date)))])],1)}))},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"flex items-center justify-center bg-gray-100 p-2",staticStyle:{"user-select":"none"}})]},proxy:!0},{key:"notFound",fn:function(){return[e("span",{staticClass:"text-gray-400"},[t._v("No hay datos disponibles.😢")])]},proxy:!0}])})],1)},_=[];const h=()=>{const t=t=>{if(!t)return"";const e=new Date(t),i=e.getDate(),n=e.getMonth()+1,s=e.getFullYear();return`${i}-${n}-${s}`};return{convertDate:t}};var p=function(){var t=this,e=t._self._c;return e("div",[e("vs-input",{attrs:{block:"",primary:"",maxlength:"8",type:"search","aria-valuemax":"8",state:"primary",placeholder:"Buscar DNI"},on:{input:t.debounceGetIncident},model:{value:t.search_dni,callback:function(e){t.search_dni=e},expression:"search_dni"}})],1)},f=[],m={data(){return{search_dni:""}},methods:{async searchDni(){this.$store.commit("incidente/set_dni_search",this.search_dni),await this.$store.dispatch("incidente/get_incident_list")},debounceGetIncident(){clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.searchDni()},300)}}},g=m,b=Object(d["a"])(g,p,f,!1,null,null,null),y=b.exports,x={components:{SearchDni:y},data(){return{}},computed:{get_incidents(){return this.$store.getters["incidente/get_incident"]}},methods:{formatDate(t){const{convertDate:e}=h();return e(t)},editIncident(t){this.$store.commit("incidente/set_selected_incident",t)}}},I=x,k=Object(d["a"])(I,v,_,!1,null,null,null),w=k.exports,$={components:{Form:u,ListIncidents:w},data(){return{isRegister:!1,incident:null}},computed:{get_selected_incident(){return this.$store.getters["incidente/get_selected_incident"]}},methods:{},created(){this.$store.dispatch("incidente/get_incident_list")},mounted(){},watch:{get_selected_incident(t){if(t)return this.incident=t,void(this.isRegister=!0);this.incident=null,this.isRegister=!1}}},C=$,D=Object(d["a"])(C,n,s,!1,null,null,null);e["default"]=D.exports},f191:function(t,e,i){"use strict";i("2407")}}]);
//# sourceMappingURL=chunk-4f29f23d.8c877883.js.map