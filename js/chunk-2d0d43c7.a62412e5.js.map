{"version":3,"sources":["webpack:///./src/views/registro_pago/RegistroPago.vue","webpack:///src/views/registro_pago/RegistroPago.vue","webpack:///./src/views/registro_pago/RegistroPago.vue?26ca","webpack:///./src/views/registro_pago/RegistroPago.vue?82d9"],"names":["render","_vm","this","_c","_self","staticClass","get_auth","group","on","$event","set_pagos","_v","agregar_nuevos_pagos","_e","attrs","item_selected","dialog","mostrar","model","value","radio","callback","$$v","expression","read_txt","lineas","length","_s","fecha","subirPagos","lineas_existentes","actualizar","edit","close_dialog","staticRenderFns","List","Add","components","data","admisionData","is_extemporaneo","computed","$store","getters","SedeText","username","getAdmision","methods","axios","get","fechaExtemporaneo","fechaActual","Date","now","refresh_reactivo","e","dispatch","sede","error","banco_comercio_read_txt","text","tipo_doc","num_doc","monto","concepto","nombre","num_operacion","console","log","split","$vs","notification","title","color","forEach","element","index","slice","trim","decimales","parseFloat","push","repetido","is_exonerado","documento_referencial","monto_full","loading","fun","Promise","resolve","input","target","reader","FileReader","onload","result","readAsText","files","then","res","condition","parseInt","agency","pagaloPeCodes","anio","mes","dia","aux","filter","item","includes","close","data_envio","obj","descripcion","num_ticket","dni","post","data_existente","indice","findIndex","component"],"mappings":"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","file":"js/chunk-2d0d43c7.a62412e5.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"flex flex-col\"},[_c('div',{staticClass:\"flex\"},[(_vm.get_auth.group == 'administrador')?_c('div',{staticClass:\"flex\"},[_c('vs-button',{staticClass:\"focus:outline-none\",on:{\"click\":function($event){return _vm.set_pagos()}}},[_vm._v(\" Mostrar Todos los Registros \")]),_c('vs-button',{staticClass:\"focus:outline-none\",on:{\"click\":function($event){return _vm.agregar_nuevos_pagos()}}},[_vm._v(\" Agregar Nuevos Registros \")])],1):_vm._e(),_c('vs-button',{staticClass:\"focus:outline-none\",attrs:{\"danger\":\"\"},on:{\"click\":function($event){_vm.item_selected = {};\n          _vm.dialog = true;}}},[_vm._v(\" Pagos Exonerados \")])],1),(!_vm.mostrar)?_c('div',{staticClass:\"flex flex-col lg:flex-row justify-between p-3 shadow-lg\"},[_c('div',{staticClass:\"flex flex-col\"},[_c('div',{staticClass:\"flex item-center gap-2\"},[_c('p',[_vm._v(\"Importar desde: \")]),_c('vs-radio',{attrs:{\"val\":\"otros\"},model:{value:(_vm.radio),callback:function ($$v) {_vm.radio=$$v},expression:\"radio\"}},[_vm._v(\" Banco de la NaciÃ³n \")]),_c('vs-radio',{attrs:{\"val\":\"comercio\"},model:{value:(_vm.radio),callback:function ($$v) {_vm.radio=$$v},expression:\"radio\"}},[_vm._v(\" Banco Comercio \")])],1),_c('div'),_c('input',{staticClass:\"mt-3\",attrs:{\"type\":\"file\",\"accept\":\".txt\"},on:{\"change\":_vm.read_txt}})]),(_vm.lineas.length > 0)?_c('div',[_c('h1',{staticClass:\"font-medium text-3xl text-gray-300\"},[_vm._v(\" Dia: \"+_vm._s(_vm.lineas[0].fecha)+\" \")])]):_vm._e(),_c('div',{staticClass:\"mt-3 lg:mt-0\"},[_c('vs-button',{attrs:{\"square\":\"\"},on:{\"click\":_vm.subirPagos}},[_c('i',{staticClass:\"fas fa-arrow-up mr-2\"}),_vm._v(\" Subir pagos \")])],1)]):_vm._e()]),_c('list',{attrs:{\"dataList\":_vm.lineas,\"countExist\":_vm.lineas_existentes.length,\"actualizar\":_vm.actualizar},on:{\"edit\":_vm.edit,\"actualizado\":function($event){_vm.actualizar = false}}}),_c('add',{attrs:{\"dialog\":_vm.dialog,\"item_selected\":_vm.item_selected},on:{\"closedialog\":_vm.close_dialog,\"actualizar\":function($event){_vm.actualizar = true}}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"flex flex-col\">\r\n      <div class=\" flex\">\r\n        <div class=\" flex\" v-if=\"get_auth.group == 'administrador'\">\r\n          <vs-button @click=\"set_pagos()\" class=\" focus:outline-none\">\r\n            Mostrar Todos los Registros\r\n          </vs-button>\r\n\r\n          <vs-button\r\n              @click=\"agregar_nuevos_pagos()\"\r\n              class=\" focus:outline-none\"\r\n          >\r\n            Agregar Nuevos Registros\r\n          </vs-button>\r\n        </div>\r\n\r\n        <vs-button\r\n            @click=\"\r\n            item_selected = {};\r\n            dialog = true;\r\n          \"\r\n            danger\r\n            class=\" focus:outline-none\"\r\n        >\r\n          Pagos Exonerados\r\n        </vs-button>\r\n      </div>\r\n\r\n      <div\r\n          v-if=\"!mostrar\"\r\n          class=\" flex flex-col lg:flex-row justify-between p-3 shadow-lg\"\r\n      >\r\n        <div class=\"flex flex-col\">\r\n          <div class=\"flex item-center gap-2\">\r\n            <p>Importar desde: </p>\r\n            <vs-radio v-model=\"radio\" val=\"otros\">\r\n              Banco de la NaciÃ³n\r\n            </vs-radio>\r\n\r\n            <vs-radio v-model=\"radio\" val=\"comercio\">\r\n              Banco Comercio\r\n            </vs-radio>\r\n          </div>\r\n          <div>\r\n\r\n          </div>\r\n          <input class=\" mt-3\" type=\"file\" accept=\".txt\" @change=\"read_txt\"/>\r\n        </div>\r\n\r\n        <div v-if=\"lineas.length > 0\">\r\n          <h1 class=\" font-medium text-3xl text-gray-300\">\r\n            Dia: {{ lineas[0].fecha }}\r\n          </h1>\r\n        </div>\r\n\r\n        <div class=\" mt-3 lg:mt-0\">\r\n          <vs-button square @click=\"subirPagos\">\r\n            <i class=\"fas fa-arrow-up mr-2\"></i>\r\n            Subir pagos\r\n          </vs-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <list\r\n        :dataList=\"lineas\"\r\n        :countExist=\"lineas_existentes.length\"\r\n        @edit=\"edit\"\r\n        :actualizar=\"actualizar\"\r\n        @actualizado=\"actualizar = false\"\r\n    />\r\n\r\n    <add\r\n        :dialog=\"dialog\"\r\n        @closedialog=\"close_dialog\"\r\n        :item_selected=\"item_selected\"\r\n        @actualizar=\"actualizar = true\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"@//plugins//axios.js\";\r\n\r\nconst List = () => import(\"./components/List.vue\");\r\nconst Add = () => import(\"./components/Add.vue\");\r\n\r\nexport default {\r\n  components: {List, Add},\r\n  data() {\r\n    return {\r\n      lineas: [],\r\n      lineas_existentes: [],\r\n      mostrar: true,\r\n      item_selected: {},\r\n      dialog: false,\r\n      actualizar: false,\r\n      admisionData: {},\r\n      is_extemporaneo: false,\r\n      radio: \"otros\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    get_auth() {\r\n      return this.$store.getters[\"auth/get_auth\"];\r\n    },\r\n\r\n    SedeText() {\r\n      if (this.get_auth.group == \"sede\") return this.get_auth.username;\r\n      return \"\";\r\n    },\r\n  },\r\n\r\n  async mounted() {\r\n    await this.set_pagos();\r\n    this.getAdmision();\r\n  },\r\n\r\n  methods: {\r\n    async getAdmision() {\r\n      // aun no se sabe si esta bien\r\n      const {data} = await axios.get(\"admision\");\r\n      this.admisionData = data[0];\r\n      const {fechaExtemporaneo} = this.admisionData;\r\n      const fechaActual = Date().now;\r\n      if (fechaExtemporaneo == fechaActual) {\r\n        this.is_extemporaneo = true;\r\n      }\r\n    },\r\n\r\n    refresh_reactivo() {\r\n      this.lineas = this.$store.getters[\"pago/get_pago\"];\r\n    },\r\n\r\n    close_dialog() {\r\n      this.dialog = false;\r\n      this.item_selected = {};\r\n    },\r\n\r\n    edit(e) {\r\n      this.item_selected = null;\r\n      this.item_selected = e;\r\n      this.dialog = true;\r\n    },\r\n\r\n    agregar_nuevos_pagos() {\r\n      this.lineas = [];\r\n      this.lineas_existentes = [];\r\n      this.mostrar = false;\r\n    },\r\n\r\n    async set_pagos() {\r\n      try {\r\n        this.mostrar = true;\r\n        this.lineas = [];\r\n        this.lineas_existentes = [];\r\n        await this.$store.dispatch(\"pago/set_pago\", {sede: this.SedeText});\r\n        this.refresh_reactivo();\r\n      } catch (error) {\r\n        //\r\n      }\r\n    },\r\n\r\n    banco_comercio_read_txt(text) {\r\n      this.lineas = [];\r\n\r\n      const tipo_doc = '03';\r\n      let num_doc, fecha, monto, concepto, nombre, num_operacion;\r\n      num_doc = fecha = monto = concepto = nombre = num_operacion = \"\";\r\n\r\n      console.log(fecha, monto, concepto, nombre, num_operacion, tipo_doc)\r\n\r\n      let lineas = text.split(\"\\n\");\r\n\r\n      if (lineas.length <= 0) {\r\n        this.$vs.notification({\r\n          title: \"Cargar Archivo de Texto\",\r\n          text: \"El txt no tiene datos! ð¢\",\r\n          color: \"warning\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      lineas.forEach((element, index) => {\r\n        if (index === 0) return;\r\n        // DNI(20) - 9 AL 28\r\n        // NOMBRE(40) - 29 AL 68\r\n        // NÂ° RECIBO(20) - 69 AL 88\r\n        // FECHAEMISION(8) - 109 AL 116\r\n        // MONTO ENTERO - 127 AL 139\r\n        // MONTO DECIMAL - 140-141\r\n        //\r\n        // COD.PAGO(20) 574\r\n        // tipo_doc,\r\n        //     num_doc,\r\n        //     fecha,\r\n        //     monto,\r\n        //     nombre,\r\n        //     num_operacion,\r\n        //     repetido: false,\r\n        //     is_exonerado: false,\r\n        //     documento_referencial: \"\",\r\n        //     monto_full: monto,\r\n\r\n        num_doc = element.slice(8, 27); //15\r\n        num_doc = num_doc.trim();\r\n        //\r\n        nombre = element.slice(28, 67); //35\r\n        nombre = nombre.trim();\r\n        //\r\n        num_operacion = element.slice(68, 87); //8\r\n        num_operacion = num_operacion.trim();\r\n        //\r\n        fecha = element.slice(108, 116); //8\r\n        fecha = fecha.trim();\r\n        fecha = fecha.slice(0, 4) + '-' + fecha.slice(4, 6) + '-' + fecha.slice(6, 8)\r\n        //\r\n        monto = element.slice(126, 138);\r\n        let decimales = element.slice(138, 140);\r\n        monto = parseFloat(`${monto}.${decimales}`);\r\n        //\r\n        concepto = element.slice(253, 256);\r\n\r\n        if (concepto !== '574') return;\r\n\r\n        this.lineas.push({\r\n          tipo_doc,\r\n          num_doc,\r\n          fecha,\r\n          monto,\r\n          nombre,\r\n          num_operacion,\r\n          repetido: false,\r\n          is_exonerado: false,\r\n          documento_referencial: \"\",\r\n          monto_full: monto,\r\n        });\r\n      });\r\n    },\r\n\r\n    async read_txt(e) {\r\n      const loading = this.$vs.loading({\r\n        color: \"success\",\r\n      });\r\n\r\n      try {\r\n        const fun = () => {\r\n          return new Promise((resolve) => {\r\n            let input = e.target;\r\n            let reader = new FileReader();\r\n            reader.onload = function () {\r\n              let text = reader.result;\r\n              resolve(text);\r\n            };\r\n            reader.readAsText(input.files[0]);\r\n          });\r\n        };\r\n\r\n        await fun().then((res) => {\r\n\r\n          if (this.radio === 'comercio') {\r\n            this.banco_comercio_read_txt(res);\r\n            return;\r\n          }\r\n\r\n\r\n          this.lineas = [];\r\n\r\n          let tipo_doc, num_doc, fecha, monto, concepto, nombre, num_operacion;\r\n          tipo_doc = num_doc = fecha = monto = concepto = nombre = num_operacion = \"\";\r\n\r\n          let lineas = res.split(\"\\n\");\r\n\r\n          if (lineas.length <= 0) {\r\n            this.$vs.notification({\r\n              title: \"Cargar Archivo de Texto\",\r\n              text: \"El txt no tiene datos! ð¢\",\r\n              color: \"warning\",\r\n            });\r\n            return;\r\n          }\r\n\r\n\r\n          lineas.forEach((element) => {\r\n            concepto = element.slice(35, 43); //8\r\n            const condition = parseInt(element.slice(112, 113));\r\n            num_doc = element.slice(47, 62); //15\r\n            num_doc = num_doc.trim();\r\n            num_doc = num_doc.slice(7, 15);\r\n            const agency = element.slice(98, 101);\r\n            const pagaloPeCodes = [\"986\", \"987\"];\r\n\r\n\r\n            if (parseInt(concepto) === 574 && condition === 2) {\r\n              tipo_doc = element.slice(25, 27); //2\r\n              fecha = element.slice(79, 87); //8\r\n              //\r\n              const anio = fecha.slice(0, 4);\r\n              const mes = fecha.slice(4, 6);\r\n              const dia = fecha.slice(6, 8);\r\n              fecha = `${anio}-${mes}-${dia}`;\r\n              //\r\n              num_operacion = element.slice(18, 25); //8\r\n              monto = element.slice(62, 77);\r\n              let decimales = 0;\r\n              decimales = monto.slice(13, 15);\r\n              monto = monto.slice(1, 13);\r\n              monto = parseFloat(`${monto}.${decimales}`);\r\n              nombre = element.slice(121, 156); //35\r\n              //\r\n              nombre = nombre.trim();\r\n              nombre = nombre.split(\" \");\r\n              let aux = nombre.filter((item) => {\r\n                if (item.length > 0) return item;\r\n              });\r\n\r\n              nombre = \"\";\r\n              aux.forEach((element) => {\r\n                nombre += element.trim() + \" \";\r\n              });\r\n\r\n              nombre = nombre.trim();\r\n\r\n\r\n              if (pagaloPeCodes.includes(agency)) {\r\n                num_operacion = num_operacion.slice(1, 7);\r\n              }\r\n\r\n\r\n              this.lineas.push({\r\n                tipo_doc,\r\n                num_doc,\r\n                fecha,\r\n                monto,\r\n                nombre,\r\n                num_operacion,\r\n                repetido: false,\r\n                is_exonerado: false,\r\n                documento_referencial: \"\",\r\n                monto_full: monto,\r\n              });\r\n\r\n              //\r\n            }\r\n          });\r\n        });\r\n      } catch (error) {\r\n        //\r\n      } finally {\r\n        loading.close();\r\n        this.lineas_existentes = [];\r\n      }\r\n    },\r\n\r\n    async subirPagos() {\r\n      if (this.lineas.length <= 0) {\r\n        this.$vs.notification({\r\n          title: \"Subir al servidor\",\r\n          text: \"No existen datos! ð¢\",\r\n          color: \"danger\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      const loading = this.$vs.loading({\r\n        color: \"success\",\r\n      });\r\n\r\n      let data_envio = [];\r\n\r\n      this.lineas.forEach((element) => {\r\n        const is_extemporaneo =\r\n            element.fecha == this.admisionData.fechaExtemporaneo;\r\n        let obj = {\r\n          descripcion: \"ADMISION UNAP\",\r\n          monto: element.monto,\r\n          num_ticket: element.num_operacion,\r\n          fecha: element.fecha,\r\n          dni: element.num_doc,\r\n          nombre: element.nombre,\r\n          sede: this.get_auth.group,\r\n          monto_full: element.monto_full,\r\n          is_extemporaneo: is_extemporaneo,\r\n        };\r\n\r\n        data_envio.push(obj);\r\n      });\r\n\r\n      try {\r\n        const {data} = await axios.post(\"post_pagos_banko/\", data_envio);\r\n\r\n        this.lineas_existentes = data.data_existente;\r\n        this.lineas.forEach((element, index) => {\r\n          let indice = this.lineas_existentes.findIndex(\r\n              (item) => item.num_ticket == element.num_operacion\r\n          );\r\n          if (indice > -1) {\r\n            this.lineas[index].repetido = true;\r\n          }\r\n        });\r\n\r\n        if (data.length <= 0) {\r\n          this.$vs.notification({\r\n            title: \"Subir al servidor\",\r\n            text: \"No se pudo subir los datos! ð¢\",\r\n            color: \"danger\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.$vs.notification({\r\n          title: \"Subir al servidor\",\r\n          text: \"Los datos se subieron correctamente! ð\",\r\n          color: \"success\",\r\n        });\r\n      } catch (error) {\r\n        this.$vs.notification({\r\n          title: \"Subir al servidor\",\r\n          text: \"OcurriÃ³ un problema al subir los datos! ð¢\",\r\n          color: \"danger\",\r\n        });\r\n      } finally {\r\n        loading.close();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegistroPago.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegistroPago.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RegistroPago.vue?vue&type=template&id=0e97db4a&scoped=true\"\nimport script from \"./RegistroPago.vue?vue&type=script&lang=js\"\nexport * from \"./RegistroPago.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e97db4a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}