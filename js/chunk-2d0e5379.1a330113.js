(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e5379"],{9419:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:" flex justify-between"},[s("vs-button",{staticClass:" focus:outline-none",on:{click:function(e){return t.add()}}},[t._v(" Agregar Nuevo ")]),s("h1",{staticClass:" text-3xl text-gray-400 font-medium"},[t._v("Usuarios")])],1),s("list",{attrs:{dataList:t.get_user},on:{edit:t.edit}}),s("add",{attrs:{dialog:t.dialog,userData:t.userData},on:{changedialog:function(e){t.dialog=!1},closedialog:function(e){return t.closeDialog()}}})],1)},r=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vs-dialog",{attrs:{blur:"","prevent-close":"","not-center":""},scopedSlots:t._u([{key:"header",fn:function(){return[s("h4",[s("b",[t._v("Usuario")])])]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"flex justify-between focus:outline-none"},[s("div",[t.id?s("vs-button",{staticClass:"focus:outline-none",attrs:{transparent:"",color:"danger"},on:{click:function(e){t.dialogConfirm=!0}}},[t._v(" Eliminar ")]):t._e()],1),s("div",{staticClass:"flex"},[s("vs-button",{staticClass:"focus:outline-none",on:{click:t.save}},[t._v(" Guardar ")]),s("vs-button",{staticClass:"focus:outline-none",attrs:{dark:"",transparent:""},on:{click:t.exit}},[t._v(" Cancelar ")])],1)])]},proxy:!0}]),model:{value:t.dialogLocal,callback:function(e){t.dialogLocal=e},expression:"dialogLocal"}},[s("form",{staticClass:"w-full flex flex-col"},[s("div",[s("span",{staticClass:"font-medium text-xl text-green-400"},[t._v(" Datos de Perfil ")]),s("div",{staticClass:"mt-5"},[s("label",[t._v("Seleccione el grupo:")]),s("v-select",{attrs:{label:"name",index:"id",options:t.get_group},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}})],1),s("div",{staticClass:"mt-5 "},[s("label",[t._v("Ingrese su correo electrónico:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"p-2 px-4 border-gray-200 border-2 rounded-lg block w-full focus:outline-none",attrs:{placeholder:"Correo Electrónico",type:"email"},domProps:{value:t.email},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)},input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),s("div",{staticClass:" mt-5"},[s("span",{staticClass:"font-medium text-xl text-green-400"},[t._v(" Datos de usuario ")]),s("div",{staticClass:"mt-5"},[s("label",{staticClass:" text-sm text-gray-500"},[t._v("Usuario")]),s("vs-input",{attrs:{readonly:t.id,autofocus:"",id:"txtusername"},scopedSlots:t._u([{key:"icon",fn:function(){return[s("i",{staticClass:"fas fa-user text-green-400"})]},proxy:!0}]),model:{value:t.username,callback:function(e){t.username="string"===typeof e?e.trim():e},expression:"username"}})],1),t.id?t._e():s("div",{staticClass:" mt-5"},[s("label",{staticClass:" text-sm text-gray-500"},[t._v("Contraseña")]),s("vs-input",{attrs:{type:"password"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}},scopedSlots:t._u([{key:"icon",fn:function(){return[s("i",{staticClass:"fas fa-key text-green-400"})]},proxy:!0}],null,!1,2489985399),model:{value:t.password,callback:function(e){t.password="string"===typeof e?e.trim():e},expression:"password"}})],1)])]),s("p",{staticClass:" text-xs text-blue-400 my-5"},[t._v(" Podrá iniciar sesión con su correo o su usuario. ")]),s("vs-dialog",{staticClass:" z-50",attrs:{width:"550px","not-center":"",blur:""},scopedSlots:t._u([{key:"header",fn:function(){return[s("h4",{staticClass:"not-margin"},[t._v("Eliminar "),s("b",[t._v("Usuario")])])]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"flex justify-between"},[s("div"),s("div",{staticClass:"flex"},[s("vs-button",{attrs:{transparent:""},on:{click:t.remove}},[t._v(" Si ")]),s("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(e){t.dialogConfirm=!1}}},[t._v(" Cancelar ")])],1)])]},proxy:!0}]),model:{value:t.dialogConfirm,callback:function(e){t.dialogConfirm=e},expression:"dialogConfirm"}},[s("div",{staticClass:"con-content"},[s("p",[t._v(" Esta seguro que desea eliminar el usuario? "),s("br"),s("b",[t._v("Esta acción no se puede deshacer")]),t._v(". ")])])])],1)},i=[],o=(s("7db0"),s("96cf"),s("1da1")),u={props:{dialog:{type:Boolean,default:!1},userData:{type:Object,default:function(){return null}}},data:function(){return{dialogLocal:!1,dialogConfirm:!1,group:"",username:"",password:"",email:"",id:null}},computed:{get_group:function(){return this.$store.getters["user/get_group"]}},watch:{dialog:function(t){this.dialogLocal=t},dialogLocal:function(t){t||this.$emit("changedialog",t)},userData:function(t){t&&(this.group=this.get_group.find((function(e){return e.id==t.group_id})),this.username=t.username,this.password=t.password,this.email=t.email,this.id=t.id)}},methods:{clearData:function(){this.group="",this.username="",this.password="",this.email="",this.id=null},remove:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.$vs.loading(),t.dialogConfirm=!1,a=[],e.prev=3,e.next=6,t.$store.dispatch("user/delete_user",{user:t.id}).then((function(t){return a=t}));case 6:if(a){e.next=9;break}return t.$vs.notification({title:"Usuario",text:"No se pudo eliminar, intentelo denuevo! 😢",color:"warning"}),e.abrupt("return");case 9:t.$vs.notification({title:"Usuario",text:"Usuario eliminado correctamente! 😎",color:"success"}),t.exit(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),t.$vs.notification({title:"Usuario",text:"No se pudo eliminar, debido a un error en el servidor! 😢",color:"danger"});case 16:return e.prev=16,s.close(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})))()},validar:function(){try{return!(0==this.group.length||0==this.email.length||0==this.username.length||!this.id&&0==this.password.length)||(this.$vs.notification({title:"Usuario",text:"Por favor, verifique los campos! 😢",color:"warning"}),!1)}catch(t){return this.$vs.notification({title:"Usuario",text:"Por favor, verifique los campos! 😢",color:"danger"}),!1}},exit:function(){this.$emit("closedialog"),this.dialogLocal=!1,this.clearData()},save:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.$vs.loading(),e.prev=1,t.validar()){e.next=4;break}return e.abrupt("return");case 4:if(a=[],r={email:t.email,username:t.username,password:t.password,group:t.group.id},t.id){e.next=11;break}return e.next=9,t.$store.dispatch("user/add_user",r).then((function(t){a=t}));case 9:e.next=19;break;case 11:return delete r.email,delete r.username,delete r.password,r.user=t.id,e.next=17,t.$store.dispatch("user/add_user_group",r).then((function(t){a=t}));case 17:return e.next=19,t.$store.dispatch("user/set_user");case 19:if(a){e.next=22;break}return t.$vs.notification({title:"Usuario",text:"No se pudo realizar la acción, vuelve a intentarlo! 😢",color:"danger"}),e.abrupt("return");case 22:t.$vs.notification({title:"Usuario",text:"Acción completada correctamente! 😎",color:"success"}),t.exit(),e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](1),console.error(e.t0);case 29:return e.prev=29,s.close(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[1,26,29,32]])})))()}}},l=u,c=s("2877"),d=Object(c["a"])(l,n,i,!1,null,"5d41dbbc",null),f=d.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"center mt-5"},[s("div",{staticClass:" p-5 rounded-3xl bg-gray-200 w-32"},[s("span",[t._v("Total: "),s("b",{staticClass:" text-3xl"},[t._v(t._s(t.dataListLocal.length))])])]),s("vs-table",{staticClass:" mt-5",attrs:{striped:""},scopedSlots:t._u([{key:"header",fn:function(){return[s("vs-input",{attrs:{border:"",placeholder:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"thead",fn:function(){return[s("vs-tr",t._l(t.columns,(function(e,a){return s("vs-th",{key:a},[t._v(" "+t._s(e.text)+" ")])})),1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.$vs.getSearch(t.dataListLocal,t.search),(function(e,a){return s("vs-tr",{key:a,attrs:{data:e}},t._l(t.columns,(function(a,r){return s("vs-td",{key:r,attrs:{edit:0==r},on:{click:function(s){return t.$emit("edit",e)}}},[t._v(" "+t._s(e[a.name])+" ")])})),1)}))},proxy:!0},{key:"notFound",fn:function(){return[t._v(" No exiten datos 😢 ")]},proxy:!0}])})],1)},v=[],m={props:{dataList:{type:Array}},data:function(){return{columns:[{name:"username",text:"Usuario"},{name:"email",text:"Email"},{name:"group",text:"Grupo"}],search:"",dataListLocal:[]}},watch:{dataList:function(t){this.dataListLocal=t}}},g=m,h=Object(c["a"])(g,p,v,!1,null,null,null),x=h.exports,_={components:{List:x,Add:f},data:function(){return{dialog:!1,userData:null}},computed:{get_user:function(){return this.$store.getters["user/get_user"]},get_group:function(){return this.$store.getters["user/get_group"]}},methods:{add:function(){this.userData=null,this.dialog=!0},edit:function(t){this.userData=t,this.userData&&(this.dialog=!0)},closeDialog:function(){this.dialog=!1,this.userData=null}},mounted:function(){this.$store.dispatch("user/set_user"),this.$store.dispatch("user/set_group"),this.dialog=!1}},b=_,y=Object(c["a"])(b,a,r,!1,null,"b66d4f2e",null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0e5379.1a330113.js.map