(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e5379"],{9419:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"flex justify-between"},[e("vs-button",{staticClass:"focus:outline-none",on:{click:function(e){return t.add()}}},[t._v(" Agregar Nuevo ")]),e("h1",{staticClass:"text-3xl text-gray-400 font-medium"},[t._v("Usuarios")])],1),e("list",{attrs:{dataList:t.get_user},on:{edit:t.edit}}),e("add",{attrs:{dialog:t.dialog,userData:t.userData},on:{changedialog:function(e){t.dialog=!1},closedialog:function(e){return t.closeDialog()}}})],1)},i=[],o=function(){var t=this,e=t._self._c;return e("vs-dialog",{attrs:{blur:"","prevent-close":"","not-center":""},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",[e("b",[t._v("Usuario")])])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"flex justify-between focus:outline-none"},[e("div",[t.id?e("vs-button",{staticClass:"focus:outline-none",attrs:{transparent:"",color:"danger"},on:{click:function(e){t.dialogConfirm=!0}}},[t._v(" Eliminar ")]):t._e()],1),e("div",{staticClass:"flex"},[e("vs-button",{staticClass:"focus:outline-none",on:{click:t.save}},[t._v(" Guardar ")]),e("vs-button",{staticClass:"focus:outline-none",attrs:{dark:"",transparent:""},on:{click:t.exit}},[t._v(" Cancelar ")])],1)])]},proxy:!0}]),model:{value:t.dialogLocal,callback:function(e){t.dialogLocal=e},expression:"dialogLocal"}},[e("form",{staticClass:"w-full flex flex-col"},[e("div",[e("span",{staticClass:"font-medium text-xl text-green-400"},[t._v(" Datos de Perfil ")]),e("div",{staticClass:"mt-5"},[e("label",[t._v("Seleccione el grupo:")]),e("v-select",{attrs:{label:"name",index:"id",options:t.get_group},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}})],1),e("div",{staticClass:"mt-5"},[e("label",[t._v("Ingrese su correo electrónico:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"p-2 px-4 border-gray-200 border-2 rounded-lg block w-full focus:outline-none",attrs:{placeholder:"Correo Electrónico",type:"email"},domProps:{value:t.email},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save.apply(null,arguments)},input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),e("div",{staticClass:"mt-5"},[e("span",{staticClass:"font-medium text-xl text-green-400"},[t._v(" Datos de usuario ")]),e("div",{staticClass:"mt-5"},[e("label",{staticClass:"text-sm text-gray-500"},[t._v("Usuario")]),e("vs-input",{attrs:{readonly:t.id,autofocus:"",id:"txtusername"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("i",{staticClass:"fas fa-user text-green-400"})]},proxy:!0}]),model:{value:t.username,callback:function(e){t.username="string"===typeof e?e.trim():e},expression:"username"}})],1),t.id?t._e():e("div",{staticClass:"mt-5"},[e("label",{staticClass:"text-sm text-gray-500"},[t._v("Contraseña")]),e("vs-input",{attrs:{type:"password"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("i",{staticClass:"fas fa-key text-green-400"})]},proxy:!0}],null,!1,2489985399),model:{value:t.password,callback:function(e){t.password="string"===typeof e?e.trim():e},expression:"password"}})],1)])]),e("p",{staticClass:"text-xs text-blue-400 my-5"},[t._v(" Podrá iniciar sesión con su correo o su usuario. ")]),e("vs-dialog",{staticClass:"z-50",attrs:{width:"550px","not-center":"",blur:""},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",{staticClass:"not-margin"},[t._v("Eliminar "),e("b",[t._v("Usuario")])])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"flex justify-between"},[e("div"),e("div",{staticClass:"flex"},[e("vs-button",{attrs:{transparent:""},on:{click:t.remove}},[t._v(" Si ")]),e("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(e){t.dialogConfirm=!1}}},[t._v(" Cancelar ")])],1)])]},proxy:!0}]),model:{value:t.dialogConfirm,callback:function(e){t.dialogConfirm=e},expression:"dialogConfirm"}},[e("div",{staticClass:"con-content"},[e("p",[t._v(" Esta seguro que desea eliminar el usuario? "),e("br"),e("b",[t._v("Esta acción no se puede deshacer")]),t._v(". ")])])])],1)},r=[],n={props:{dialog:{type:Boolean,default:!1},userData:{type:Object,default:()=>null}},data(){return{dialogLocal:!1,dialogConfirm:!1,group:"",username:"",password:"",email:"",id:null}},computed:{get_group(){return this.$store.getters["user/get_group"]}},watch:{dialog(t){this.dialogLocal=t},dialogLocal(t){t||this.$emit("changedialog",t)},userData(t){t&&(this.group=this.get_group.find(e=>e.id==t.group_id),this.username=t.username,this.password=t.password,this.email=t.email,this.id=t.id)}},methods:{clearData(){this.group="",this.username="",this.password="",this.email="",this.id=null},async remove(){const t=this.$vs.loading();this.dialogConfirm=!1;let e=[];try{if(await this.$store.dispatch("user/delete_user",{user:this.id}).then(t=>e=t),!e)return void this.$vs.notification({title:"Usuario",text:"No se pudo eliminar, intentelo denuevo! 😢",color:"warning"});this.$vs.notification({title:"Usuario",text:"Usuario eliminado correctamente! 😎",color:"success"}),this.exit()}catch(s){this.$vs.notification({title:"Usuario",text:"No se pudo eliminar, debido a un error en el servidor! 😢",color:"danger"})}finally{t.close()}},validar(){try{return!(0==this.group.length||0==this.email.length||0==this.username.length||!this.id&&0==this.password.length)||(this.$vs.notification({title:"Usuario",text:"Por favor, verifique los campos! 😢",color:"warning"}),!1)}catch(t){return this.$vs.notification({title:"Usuario",text:"Por favor, verifique los campos! 😢",color:"danger"}),!1}},exit(){this.$emit("closedialog"),this.dialogLocal=!1,this.clearData()},async save(){const t=this.$vs.loading();try{if(!this.validar())return;let e=[],s={email:this.email,username:this.username,password:this.password,group:this.group.id};if(this.id?(delete s.email,delete s.username,delete s.password,s.user=this.id,await this.$store.dispatch("user/add_user_group",s).then(t=>{e=t}),await this.$store.dispatch("user/set_user")):await this.$store.dispatch("user/add_user",s).then(t=>{e=t}),!e)return void this.$vs.notification({title:"Usuario",text:"No se pudo realizar la acción, vuelve a intentarlo! 😢",color:"danger"});this.$vs.notification({title:"Usuario",text:"Acción completada correctamente! 😎",color:"success"}),this.exit()}catch(e){console.error(e)}finally{t.close()}}}},l=n,u=s("2877"),c=Object(u["a"])(l,o,r,!1,null,"5d41dbbc",null),d=c.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"center mt-5"},[e("div",{staticClass:"p-5 rounded-3xl bg-gray-200 w-32"},[e("span",[t._v("Total: "),e("b",{staticClass:"text-3xl"},[t._v(t._s(t.dataListLocal.length))])])]),e("vs-table",{staticClass:"mt-5",attrs:{striped:""},scopedSlots:t._u([{key:"header",fn:function(){return[e("vs-input",{attrs:{border:"",placeholder:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"thead",fn:function(){return[e("vs-tr",t._l(t.columns,(function(s,a){return e("vs-th",{key:a},[t._v(" "+t._s(s.text)+" ")])})),1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.$vs.getSearch(t.dataListLocal,t.search),(function(s,a){return e("vs-tr",{key:a,attrs:{data:s}},t._l(t.columns,(function(a,i){return e("vs-td",{key:i,attrs:{edit:0==i},on:{click:function(e){return t.$emit("edit",s)}}},[t._v(" "+t._s(s[a.name])+" ")])})),1)}))},proxy:!0},{key:"notFound",fn:function(){return[t._v(" No exiten datos 😢 ")]},proxy:!0}])})],1)},f=[],h={props:{dataList:{type:Array}},data:()=>({columns:[{name:"username",text:"Usuario"},{name:"email",text:"Email"},{name:"group",text:"Grupo"}],search:"",dataListLocal:[]}),watch:{dataList(t){this.dataListLocal=t}}},v=h,g=Object(u["a"])(v,p,f,!1,null,null,null),m=g.exports,x={components:{List:m,Add:d},data(){return{dialog:!1,userData:null}},computed:{get_user(){return this.$store.getters["user/get_user"]},get_group(){return this.$store.getters["user/get_group"]}},methods:{add(){this.userData=null,this.dialog=!0},edit(t){this.userData=t,this.userData&&(this.dialog=!0)},closeDialog(){this.dialog=!1,this.userData=null}},mounted(){this.$store.dispatch("user/set_user"),this.$store.dispatch("user/set_group"),this.dialog=!1}},_=x,y=Object(u["a"])(_,a,i,!1,null,"b66d4f2e",null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0e5379.3e7c4b5d.js.map